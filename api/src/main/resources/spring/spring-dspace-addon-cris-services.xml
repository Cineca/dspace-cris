<?xml version="1.0" encoding="UTF-8"?>
<!--
  The contents of this file are subject to the license and copyright
   detailed in the LICENSE and NOTICE files at the root of the source
   tree and available online at
   
   https://github.com/CILEA/dspace-cris/wiki/License
-->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:webflow="http://www.springframework.org/schema/webflow-config"
	xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	
	<bean id="txProxyTemplate" abstract="true"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="proxyTargetClass" value="true" />
		<property name="transactionAttributes">
			<props>
				<prop key="delete*">PROPAGATION_REQUIRED</prop>
				<prop key="save*">PROPAGATION_REQUIRED</prop>								
				<prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
			</props>
		</property>
	</bean>

	<bean id="baseService" class="it.cilea.osd.common.service.PersistenceService"
		abstract="true">		
		<property name="modelDaos">
			<map>			
				<entry key="it.cilea.osd.jdyna.model.ANestedObject">
					<ref bean="nestedObjectDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.web.Tab">
					<ref bean="tabDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.ResearcherPage">
					<ref bean="researcherPageDao" />
				</entry>				
				<entry key="org.dspace.app.cris.model.Project">
					<ref bean="researcherGrantDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.OrganizationUnit">
					<ref bean="organizationUnitDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.RPAdditionalFieldStorage">
					<ref bean="rpAdditionalDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.ProjectAdditionalFieldStorage">
					<ref bean="projectAdditionalDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.OUAdditionalFieldStorage">
					<ref bean="ouAdditionalDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.RPPropertiesDefinition">
					<ref bean="rpPropertiesDefinitionDao" />
				</entry>
				<entry				         
					key="org.dspace.app.cris.model.jdyna.RPNestedPropertiesDefinition">
					<ref bean="rpNestedPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.ProjectPropertiesDefinition">
					<ref bean="grantPropertiesDefinitionDao" />
				</entry>
				<entry				         
					key="org.dspace.app.cris.model.jdyna.ProjectNestedPropertiesDefinition">
					<ref bean="projectNestedPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.OUPropertiesDefinition">
					<ref bean="ouPropertiesDefinitionDao" />
				</entry>
				<entry				         
					key="org.dspace.app.cris.model.jdyna.OUNestedPropertiesDefinition">
					<ref bean="ouNestedPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorRPPropertiesDefinition">
					<ref bean="rpDecoratorPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorProjectPropertiesDefinition">
					<ref bean="grantDecoratorPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorOUPropertiesDefinition">
					<ref bean="ouDecoratorPropertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorRPNestedPropertiesDefinition">
					<ref bean="rpDecoratorNestedPropertiesDefinitionDao" />
				</entry>
				<entry				                  
					key="org.dspace.app.cris.model.jdyna.DecoratorProjectNestedPropertiesDefinition">
					<ref bean="projectDecoratorNestedPropertiesDefinitionDao" />
				</entry>
				<entry				                  
					key="org.dspace.app.cris.model.jdyna.DecoratorOUNestedPropertiesDefinition">
					<ref bean="ouDecoratorNestedPropertiesDefinitionDao" />
				</entry>				
				<entry
					key="org.dspace.app.cris.model.jdyna.RPTypeNestedObject">
					<ref bean="rpTypeDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.ProjectTypeNestedObject">
					<ref bean="projectTypeDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.OUTypeNestedObject">
					<ref bean="ouTypeDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorRPTypeNested">
					<ref bean="rpDecoratorTypeNestedDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorProjectTypeNested">
					<ref bean="projectDecoratorTypeNestedDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.DecoratorOUTypeNested">
					<ref bean="ouDecoratorTypeNestedDao" />
				</entry>
				<entry
					key="it.cilea.osd.jdyna.model.Containable">
					<ref bean="containableDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.model.Property">
					<ref bean="propertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.RPProperty">
					<ref bean="rpPropertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.ProjectProperty">
					<ref bean="grantPropertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.OUProperty">
					<ref bean="ouPropertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.RPNestedProperty">
					<ref bean="rpNestedPropertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.ProjectNestedProperty">
					<ref bean="projectNestedPropertyDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.OUNestedProperty">
					<ref bean="ouNestedPropertyDao" />
				</entry>												
				<entry key="org.dspace.app.cris.model.jdyna.RPNestedObject">
					<ref bean="rpNestedObjectDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.ProjectNestedObject">
					<ref bean="projectNestedObjectDao" />
				</entry>
				<entry key="org.dspace.app.cris.model.jdyna.OUNestedObject">
					<ref bean="ouNestedObjectDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.model.PropertiesDefinition">
					<ref bean="propertiesDefinitionDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.TabResearcherPage">
					<ref bean="rpTabDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.TabProject">
					<ref bean="grantTabDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.TabOrganizationUnit">
					<ref bean="ouTabDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.BoxResearcherPage">
					<ref bean="rpBoxDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.BoxProject">
					<ref bean="grantBoxDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.BoxOrganizationUnit">
					<ref bean="ouBoxDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.EditTabResearcherPage">
					<ref bean="rpEditTabDao" />
				</entry>
				<entry
					key="org.dspace.app.cris.model.jdyna.EditTabProject">
					<ref bean="grantEditTabDao" />
				</entry>				
				<entry
					key="org.dspace.app.cris.model.jdyna.EditTabOrganizationUnit">
					<ref bean="ouEditTabDao" />
				</entry>						
				<entry key="it.cilea.osd.jdyna.widget.WidgetTesto">
					<ref bean="widgetTextDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.widget.WidgetEmail">
					<ref bean="widgetEmailDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.widget.WidgetDate">
					<ref bean="widgetDateDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.widget.WidgetLink">
					<ref bean="widgetLinkDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.widget.WidgetFile">
					<ref bean="widgetFileDao" />
				</entry>
				<entry key="it.cilea.osd.jdyna.model.AWidget">
					<ref bean="widgetDao" />
				</entry>				
				<entry key="org.dspace.app.cris.model.RPSubscription">
					<ref bean="rpSubscriptionDao" />
				</entry>
			</map>
		</property>		
	</bean>

	<bean id="applicationService" parent="txProxyTemplate">
		<property name="target">
			<bean class="org.dspace.app.cris.service.ApplicationService"
				init-method="init" parent="baseService">
				<property name="applicationDao" ref="applicationDao" />
			</bean>
		</property>
	</bean>
		
	<bean id="researcherPageUtils" class="org.dspace.app.cris.util.ResearcherPageUtils">
		<constructor-arg ref="applicationService" />
	</bean>	
	
	<bean class="it.cilea.osd.jdyna.util.AnagraficaUtils">
		<constructor-arg ref="applicationService" />
	</bean>	
	
	<!--  DAO  -->
	
	<bean id="applicationDao" class="org.dspace.app.cris.dao.ApplicationDao">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>

	<bean id="namedQueryIntroductionAdvisor"
		class="it.cilea.osd.common.dao.impl.NamedQueryIntroductionAdvisor" />

	<bean id="abstractDaoTarget" class="it.cilea.osd.common.dao.impl.GenericDaoHibernateImpl"
		abstract="true">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>

	<bean id="abstractDao" class="org.springframework.aop.framework.ProxyFactoryBean"
		abstract="true">
		<property name="interceptorNames">
			<list>
				<value>namedQueryIntroductionAdvisor</value>
			</list>
		</property>
	</bean>

	<bean id="researcherPageDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ResearcherPageDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.ResearcherPage</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="researcherGrantDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ProjectDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.Project</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
		
		
	<bean id="organizationUnitDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.OrganizationUnitDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.OrganizationUnit</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
		
	<bean id="rpAdditionalDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.RPAdditionalFieldStorageDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.jdyna.RPAdditionalFieldStorage</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	

	<bean id="projectAdditionalDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ProjectAdditionalFieldStorageDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.jdyna.ProjectAdditionalFieldStorage</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="ouAdditionalDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.OUAdditionalFieldStorageDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.jdyna.OUAdditionalFieldStorage</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
		
	<bean id="widgetDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.model.AWidget
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>


	<bean id="widgetTextDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetTestoDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.widget.WidgetTesto
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="widgetLinkDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetLinkDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.widget.WidgetLink
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="widgetFileDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetFileDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.widget.WidgetFile
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="widgetEmailDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetEmailDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.widget.WidgetEmail
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="widgetDateDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.WidgetDateDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.widget.WidgetDate
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="propertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.PropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.model.Property
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPPropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="grantPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectPropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="ouPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUPropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpNestedPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.PropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPNestedProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="projectNestedPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.PropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectNestedProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	
	<bean id="ouNestedPropertyDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.PropertyDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUNestedProperty
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="nestedObjectDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.NestedObjectDAO
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.model.ANestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="rpNestedObjectDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.NestedObjectDAO
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="projectNestedObjectDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.NestedObjectDAO
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="ouNestedObjectDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.NestedObjectDAO
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="rpPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="projectNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	

	<bean id="grantPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>


	<bean id="ouNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	

	<bean id="ouPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="propertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.PropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.model.PropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>



	<bean id="tabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>it.cilea.osd.jdyna.dao.TabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.web.Tab
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.RPTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.TabResearcherPage
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="grantTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ProjectTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.TabProject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="ouTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.OUTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.TabOrganizationUnit
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="rpBoxDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.RPBoxDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.BoxResearcherPage
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	<bean id="grantBoxDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ProjectBoxDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.BoxProject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	<bean id="ouBoxDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.OUBoxDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.BoxOrganizationUnit
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	<bean id="rpEditTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.RPEditTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.EditTabResearcherPage
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	<bean id="grantEditTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.ProjectEditTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.EditTabProject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	<bean id="ouEditTabDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.OUEditTabDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.EditTabOrganizationUnit
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>		
	<bean id="rpDecoratorPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPDecoratorPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorRPPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="rpDecoratorNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPDecoratorNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorRPNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="grantDecoratorPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectDecoratorPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorProjectPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="projectDecoratorNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectDecoratorNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorProjectNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="ouDecoratorPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUDecoratorPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorOUPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="ouDecoratorNestedPropertiesDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUDecoratorNestedPropertiesDefinitionDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorOUNestedPropertiesDefinition
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="containableDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				it.cilea.osd.jdyna.dao.ContainableDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						it.cilea.osd.jdyna.model.Containable
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpSubscriptionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>org.dspace.app.cris.dao.RPSubscriptionDao</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>org.dspace.app.cris.model.RPSubscription</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	

	<bean id="rpTypeDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPTypeNestedObjectDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.RPTypeNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="projectTypeDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectTypeNestedObjectDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.ProjectTypeNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="ouTypeDefinitionDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUTypeNestedObjectDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.OUTypeNestedObject
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>

	<bean id="rpDecoratorTypeNestedDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.RPDecoratorTypeNestedDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorRPTypeNested
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="projectDecoratorTypeNestedDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.ProjectDecoratorTypeNestedDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorProjectTypeNested
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
	<bean id="ouDecoratorTypeNestedDao" parent="abstractDao">
		<property name="proxyInterfaces">
			<value>
				org.dspace.app.cris.dao.OUDecoratorTypeNestedDao
			</value>
		</property>
		<property name="target">
			<bean parent="abstractDaoTarget">
				<constructor-arg>
					<value>
						org.dspace.app.cris.model.jdyna.DecoratorOUTypeNested
					</value>
				</constructor-arg>
			</bean>
		</property>
	</bean>
				
	<!--  resources  -->
	<!-- dspace-config is a system variable, set it as jvm parameter -->
	<bean id="propertyConfigurer"
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">	
		<property name="searchSystemEnvironment" value="true"/>							
		<property name="locations">
			<list>				
				<value>classpath:hibernate/hibernate-rp.properties</value>
			</list>
		</property>
	</bean>
	

	<bean id="dataSource"
		class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
		<property name="driverClass" value="${hibernate.connection.driver_class}" />
		<property name="jdbcUrl" value="${hibernate.connection.url}" />
		<property name="user" value="${hibernate.connection.username}" />
		<property name="password" value="${hibernate.connection.password}" />
		
		<!-- these are C3P0 properties -->
        <property name="acquireIncrement" value="${c3p0.acquire_increment}" />
        <property name="minPoolSize" value="${c3p0.idle_test_period}" />
        <property name="maxPoolSize" value="${c3p0.max_size}" />
        <property name="maxIdleTime" value="${c3p0.min_size}" />
		
	</bean>

	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
		<property name="dataSource" ref="dataSource" />
		<property name="configLocation" value="classpath:hibernate/hibernate-rp.cfg.xml" />
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.connection.driver_class">
					${hibernate.connection.driver_class}
				</prop>
				<prop key="hibernate.connection.url">
					${hibernate.connection.url}
				</prop>
				<prop key="hibernate.connection.username">
					${hibernate.connection.username}
				</prop>
				<prop key="hibernate.connection.password">
					${hibernate.connection.password}
				</prop>
			</props>
		</property>
		<!--
			event listenter for indexing with Hibernate Seach and naming RP change
		-->
		<property name="eventListeners">
			<map>
				<entry key="save-update">					
					<ref local="UUIDListener" />											
				</entry>
				<entry key="pre-insert">		
					<list>		
						<ref local="RPListener" />	
						<ref local="CRISIDListener" />
					</list>
				</entry>				
				<entry key="pre-update">					
					<ref local="RPListener" />											
				</entry>				
				<entry key="post-load">
					<ref local="RPListener" />
				</entry>
				<entry key="post-insert">
					<list>
						<ref local="crisIndexerListner" />						
					</list>
				</entry>
				<entry key="post-update">	
					<list>
						<ref local="crisIndexerListner" />
					</list>				
				</entry>				
				<entry key="post-delete">
					<list>
						<ref local="crisIndexerListner" />
					</list>
				</entry>				
			</map>
		</property>
	</bean>

	<bean id="crisIndexerListner" class="org.dspace.app.cris.discovery.CrisListenerSolrIndexer">
		<property name="crisSearchService" ref="org.dspace.discovery.IndexingService" />
	</bean>
	
	<bean id="RPListener" class="org.dspace.app.cris.model.listener.RPListener"/>

	<bean id="UUIDListener" class="org.dspace.app.cris.model.listener.UUIDListener"/>
	
	<bean id="CRISIDListener" class="org.dspace.app.cris.model.listener.CrisIDListener"/>
	
	<bean id="transactionManager"
		class="org.springframework.orm.hibernate3.HibernateTransactionManager">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
	
	<bean id="crisConstants" class="org.dspace.app.cris.model.CrisConstants" scope="prototype">
		<!-- example configuration -->
		<property name="otherTypeMap">
			<map>
				<entry key="inserttyposhortnamefordynamicentity" value="assignedtype"/>
			</map>
		</property>
		<property name="authorityPrefixMap">
			<map>
				<entry key="inserttyposhortnamefordynamicentity" value="assignedauthority"/>
			</map>
		</property>		
	</bean>
</beans>
